(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-002e499f"],{"037b":function(t,e,n){"use strict";var r=n("72b5"),o=n.n(r);o.a},"05d7":function(t,e,n){"use strict";var r=n("63b8"),o=n.n(r);o.a},1009:function(t,e,n){},"63b8":function(t,e,n){},"6f1c":function(t,e,n){"use strict";var r=n("a2f2"),o=n.n(r);o.a},"72b5":function(t,e,n){},"968f":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reader",class:t.curTheme},[n("SidebarReader"),n("ReaderWrap",{class:t.curFontFamily}),n("ReaderSetBar",{on:{popup:function(e){t.showPopup=!t.showPopup}}}),t.showPopup?n("div",[n("SettingPopup",{attrs:{curFontSize:t.curFontSize},on:{"hide-popup":function(e){t.showPopup=!1},"switch-theme":function(e){return t.switchTheme(e)},"switch-fontfamily":function(e){return t.switchFontFamily(e)},"set-font-size":function(e){return t.setFontSize(e)}}})],1):t._e()],1)},o=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",{staticClass:"sidebar"},[n("header",{staticClass:"sidebar-item-title",on:{click:function(e){return e.target!==e.currentTarget?null:t.show(1)}}},[t._v("目录")]),n("div",{directives:[{name:"show",rawName:"v-show",value:1===t.isShow,expression:"isShow === 1"}],staticClass:"catalog"},t._l(t.secList,function(e,r){return n("div",{key:r,staticClass:"sidebar-item-book"},[n("div",{staticClass:"sidebar-sec-name sidebar-collapse-item",on:{click:function(n){return t.jumpTo(e.sectionUrl)}}},[t._v(t._s(e.secName))])])}),0)])},c=[],a=n("d4bd"),s={mixins:[a["a"]],data:function(){return{currSection:0}},computed:{secList:function(){return this.$store.state.secList}},methods:{jumpTo:function(t){this.$store.commit("changeurl",t)}}},u=s,l=(n("6f1c"),n("2877")),h=Object(l["a"])(u,i,c,!1,null,null,null),d=h.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reader-wrap"},[n("div",{staticClass:"reader-item-content",domProps:{innerHTML:t._s(t.content)}}),n("paging",{on:{"page-turing":function(e){return t.pageTurning(e)}}})],1)},f=[],p=(n("a481"),n("5a72")),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"paging-wrap"},[n("div",{staticClass:"pre-page",on:{click:function(e){return t.prePage()}}},[t._v("上一页")]),n("div",{staticClass:"next-page",on:{click:function(e){return t.nextPage()}}},[t._v("下一页")])])},g=[],b={methods:{getBookData:function(){var t=this.$route.params.bookname,e=this.$route.query.section;return[t,e]},prePage:function(){var t=this,e=this.getBookData();Object(p["b"])(e[0]).then(function(){return p["a"].read(e[0],e[1]-1)}).then(function(e){t.$emit("page-turing",e)})},nextPage:function(){var t=this,e=this.getBookData();Object(p["b"])(e[0]).then(function(){return p["a"].read(e[0],e[1]+1)}).then(function(e){t.$emit("page-turing",e)}).catch(function(t){})}}},k=b,w=(n("05d7"),Object(l["a"])(k,v,g,!1,null,null,null)),F=w.exports,S={components:{paging:F},data:function(){return{currBook:"",content:"",domparser:""}},computed:{currUrl:function(){return this.$store.state.readerCurrContentUrl}},methods:{removeLink:function(t){""===this.domparser&&(this.domparser=new DOMParser);for(var e=this.domparser.parseFromString(t,"text/html"),n=e.querySelectorAll("a"),r=0;r<n.length;r++){var o=n[r];o.setAttribute("href","#")}return"".concat(e.querySelector("body").innerHTML)},changeAddress:function(t){var e=this.$route.params.bookname;this.$router.replace({name:"reader",params:{bookname:e},query:{section:t}})},pageTurning:function(t){this.content=this.removeLink(t.content),this.changeAddress(t.section)}},watch:{currUrl:function(t){var e=this;Object(p["b"])(this.currBook).then(function(){return p["a"].indexRead(e.currBook,t)}).then(function(t){e.content=e.removeLink(t.content),e.changeAddress(t.section)})}},mounted:function(){var t=this;this.currBook=this.$route.params.bookname,Object(p["b"])(this.currBook).then(function(){var e=0;return p["a"].read(t.currBook,e)}).then(function(e){e.map(function(e){t.$store.commit("addsec",e)});var n=1;return p["a"].read(t.currBook,n)}).then(function(e){t.content=t.removeLink(e.content)}),this.changeAddress(1)}},y=S,_=(n("e03b"),Object(l["a"])(y,m,f,!1,null,null,null)),T=_.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reader-set",staticStyle:{background:"rgba(0,0,0,0) !important"}},[n("div",{staticClass:"setting-wrap",on:{click:function(e){return t.$emit("popup")}}},[t._v("设置")]),n("div",{staticClass:"go-top",on:{click:function(e){return t.goTop()}}},[t._v("回到顶部")])])},C=[],x={methods:{goTop:function(){var t=document.querySelector(".reader-wrap").offsetHeight,e=-t/100,n=function t(){window.scrollBy(0,e),0!==document.documentElement.scrollTop&&requestAnimationFrame(t)};requestAnimationFrame(n)}}},B=x,P=(n("9dec"),Object(l["a"])(B,$,C,!1,null,null,null)),j=P.exports,O={data:function(){return{showPopup:!1,selectTheme:0,selectFontFamily:"",curFontSize:18}},computed:{curTheme:function(){var t={1:{"theme-1":!0},2:{"theme-2":!0},3:{"theme-3":!0},4:{"theme-4":!0}};return t[this.selectTheme]},curFontFamily:function(){var t={"雅黑":{yahei:!0},"宋体":{song:!0},"楷体":{kai:!0}};return t[this.selectFontFamily]}},components:{SidebarReader:d,ReaderWrap:T,ReaderSetBar:j,SettingPopup:function(){return n.e("chunk-dbba60c4").then(n.bind(null,"33e4"))}},methods:{switchTheme:function(t){this.selectTheme=t},switchFontFamily:function(t){this.selectFontFamily=t},setFontSize:function(t){t>48||t<12||(this.curFontSize=t,document.querySelector(".reader-item-content").style.fontSize="".concat(t,"px"))}}},L=O,q=(n("037b"),Object(l["a"])(L,r,o,!1,null,null,null));e["default"]=q.exports},"9dec":function(t,e,n){"use strict";var r=n("ea0f"),o=n.n(r);o.a},a2f2:function(t,e,n){},e03b:function(t,e,n){"use strict";var r=n("1009"),o=n.n(r);o.a},ea0f:function(t,e,n){}}]);
//# sourceMappingURL=chunk-002e499f-legacy.bfe42d39.js.map