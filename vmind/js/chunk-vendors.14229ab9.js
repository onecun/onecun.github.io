(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"01f9":function(e,t,n){"use strict";var i=n("2d00"),o=n("5ca1"),r=n("2aba"),a=n("32e9"),s=n("84f2"),d=n("41a0"),l=n("7f20"),h=n("38fd"),u=n("2b4c")("iterator"),c=!([].keys&&"next"in[].keys()),_="@@iterator",f="keys",v="values",p=function(){return this};e.exports=function(e,t,n,g,m,y,b){d(n,t,g);var w,x,j,k=function(e){if(!c&&e in M)return M[e];switch(e){case f:return function(){return new n(this,e)};case v:return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",T=m==v,E=!1,M=e.prototype,z=M[u]||M[_]||m&&M[m],C=z||k(m),I=m?T?k("entries"):C:void 0,L="Array"==t&&M.entries||z;if(L&&(j=h(L.call(new e)),j!==Object.prototype&&j.next&&(l(j,S,!0),i||"function"==typeof j[u]||a(j,u,p))),T&&z&&z.name!==v&&(E=!0,C=function(){return z.call(this)}),i&&!b||!c&&!E&&M[u]||a(M,u,C),s[t]=C,s[S]=p,m)if(w={values:T?C:k(v),keys:y?C:k(f),entries:I},b)for(x in w)x in M||r(M,x,w[x]);else o(o.P+o.F*(c||E),t,w);return w}},"02f4":function(e,t,n){var i=n("4588"),o=n("be13");e.exports=function(e){return function(t,n){var r,a,s=String(o(t)),d=i(n),l=s.length;return d<0||d>=l?e?"":void 0:(r=s.charCodeAt(d),r<55296||r>56319||d+1===l||(a=s.charCodeAt(d+1))<56320||a>57343?e?s.charAt(d):r:e?s.slice(d,d+2):a-56320+(r-55296<<10)+65536)}}},"0390":function(e,t,n){"use strict";var i=n("02f4")(!0);e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},"0bfb":function(e,t,n){"use strict";var i=n("cb7c");e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"0d58":function(e,t,n){var i=n("ce10"),o=n("e11e");e.exports=Object.keys||function(e){return i(e,o)}},1495:function(e,t,n){var i=n("86cc"),o=n("cb7c"),r=n("0d58");e.exports=n("9e1e")?Object.defineProperties:function(e,t){o(e);var n,a=r(t),s=a.length,d=0;while(s>d)i.f(e,n=a[d++],t[n]);return e}},"214f":function(e,t,n){"use strict";n("b0c5");var i=n("2aba"),o=n("32e9"),r=n("79e5"),a=n("be13"),s=n("2b4c"),d=n("520a"),l=s("species"),h=!r(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),u=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var c=s(e),_=!r(function(){var t={};return t[c]=function(){return 7},7!=""[e](t)}),f=_?!r(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[l]=function(){return n}),n[c](""),!t}):void 0;if(!_||!f||"replace"===e&&!h||"split"===e&&!u){var v=/./[c],p=n(a,c,""[e],function(e,t,n,i,o){return t.exec===d?_&&!o?{done:!0,value:v.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}),g=p[0],m=p[1];i(String.prototype,e,g),o(RegExp.prototype,c,2==t?function(e,t){return m.call(e,this,t)}:function(e){return m.call(e,this)})}}},"230e":function(e,t,n){var i=n("d3f4"),o=n("7726").document,r=i(o)&&i(o.createElement);e.exports=function(e){return r?o.createElement(e):{}}},"23c6":function(e,t,n){var i=n("2d95"),o=n("2b4c")("toStringTag"),r="Arguments"==i(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),o))?n:r?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},2877:function(e,t,n){"use strict";function i(e,t,n,i,o,r,a,s){var d,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),a?(d=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=d):o&&(d=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),d)if(l.functional){l._injectStyles=d;var h=l.render;l.render=function(e,t){return d.call(t),h(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,d):[d]}return{exports:e,options:l}}n.d(t,"a",function(){return i})},"28a5":function(e,t,n){"use strict";var i=n("aae3"),o=n("cb7c"),r=n("ebd6"),a=n("0390"),s=n("9def"),d=n("5f1b"),l=n("520a"),h=n("79e5"),u=Math.min,c=[].push,_="split",f="length",v="lastIndex",p=4294967295,g=!h(function(){RegExp(p,"y")});n("214f")("split",2,function(e,t,n,h){var m;return m="c"=="abbc"[_](/(b)*/)[1]||4!="test"[_](/(?:)/,-1)[f]||2!="ab"[_](/(?:ab)*/)[f]||4!="."[_](/(.?)(.?)/)[f]||"."[_](/()()/)[f]>1||""[_](/.?/)[f]?function(e,t){var o=String(this);if(void 0===e&&0===t)return[];if(!i(e))return n.call(o,e,t);var r,a,s,d=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,_=void 0===t?p:t>>>0,g=new RegExp(e.source,h+"g");while(r=l.call(g,o)){if(a=g[v],a>u&&(d.push(o.slice(u,r.index)),r[f]>1&&r.index<o[f]&&c.apply(d,r.slice(1)),s=r[0][f],u=a,d[f]>=_))break;g[v]===r.index&&g[v]++}return u===o[f]?!s&&g.test("")||d.push(""):d.push(o.slice(u)),d[f]>_?d.slice(0,_):d}:"0"[_](void 0,0)[f]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,i){var o=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,o,i):m.call(String(o),n,i)},function(e,t){var i=h(m,e,this,t,m!==n);if(i.done)return i.value;var l=o(e),c=String(this),_=r(l,RegExp),f=l.unicode,v=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(g?"y":"g"),y=new _(g?l:"^(?:"+l.source+")",v),b=void 0===t?p:t>>>0;if(0===b)return[];if(0===c.length)return null===d(y,c)?[c]:[];var w=0,x=0,j=[];while(x<c.length){y.lastIndex=g?x:0;var k,S=d(y,g?c:c.slice(x));if(null===S||(k=u(s(y.lastIndex+(g?0:x)),c.length))===w)x=a(c,x,f);else{if(j.push(c.slice(w,x)),j.length===b)return j;for(var T=1;T<=S.length-1;T++)if(j.push(S[T]),j.length===b)return j;x=w=k}}return j.push(c.slice(w)),j}]})},"2aba":function(e,t,n){var i=n("7726"),o=n("32e9"),r=n("69a8"),a=n("ca5a")("src"),s=n("fa5b"),d="toString",l=(""+s).split(d);n("8378").inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var d="function"==typeof n;d&&(r(n,"name")||o(n,"name",t)),e[t]!==n&&(d&&(r(n,a)||o(n,a,e[t]?""+e[t]:l.join(String(t)))),e===i?e[t]=n:s?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,d,function(){return"function"==typeof this&&this[a]||s.call(this)})},"2aeb":function(e,t,n){var i=n("cb7c"),o=n("1495"),r=n("e11e"),a=n("613b")("IE_PROTO"),s=function(){},d="prototype",l=function(){var e,t=n("230e")("iframe"),i=r.length,o="<",a=">";t.style.display="none",n("fab2").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(o+"script"+a+"document.F=Object"+o+"/script"+a),e.close(),l=e.F;while(i--)delete l[d][r[i]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[d]=i(e),n=new s,s[d]=null,n[a]=e):n=l(),void 0===t?n:o(n,t)}},"2b4c":function(e,t,n){var i=n("5537")("wks"),o=n("ca5a"),r=n("7726").Symbol,a="function"==typeof r,s=e.exports=function(e){return i[e]||(i[e]=a&&r[e]||(a?r:o)("Symbol."+e))};s.store=i},"2d00":function(e,t){e.exports=!1},"2d95":function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},"2fc8":function(e,t,n){"use strict";function i(){if("undefined"===typeof window.Promise)throw new Error("any-promise browser requires a polyfill or explicit registration e.g: require('any-promise/register/bluebird')");return{Promise:window.Promise,implementation:"window.Promise"}}e.exports=n("78ae")(window,i)},"32e9":function(e,t,n){var i=n("86cc"),o=n("4630");e.exports=n("9e1e")?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},3846:function(e,t,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"38fd":function(e,t,n){var i=n("69a8"),o=n("4bf8"),r=n("613b")("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),i(e,r)?e[r]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},4100:function(e,t){(function(e){"use strict";var t=e.document,n="jsMind",i=e[n];if(i&&"undefined"==typeof i.draggable){var o=i.util.dom,r=i.util.canvas,a="getSelection"in e?function(){e.getSelection().removeAllRanges()}:function(){t.selection.empty()},s={line_width:2,lookup_delay:500,lookup_interval:80};i.draggable=function(e){this.jm=e,this.e_canvas=null,this.canvas_ctx=null,this.shadow=null,this.shadow_w=0,this.shadow_h=0,this.active_node=null,this.target_node=null,this.target_direct=null,this.client_w=0,this.client_h=0,this.offset_x=0,this.offset_y=0,this.hlookup_delay=0,this.hlookup_timer=0,this.capture=!1,this.moved=!1},i.draggable.prototype={init:function(){this._create_canvas(),this._create_shadow(),this._event_bind()},resize:function(){this.jm.view.e_nodes.appendChild(this.shadow),this.e_canvas.width=this.jm.view.size.w,this.e_canvas.height=this.jm.view.size.h},_create_canvas:function(){var e=t.createElement("canvas");this.jm.view.e_panel.appendChild(e);var n=e.getContext("2d");this.e_canvas=e,this.canvas_ctx=n},_create_shadow:function(){var e=t.createElement("jmnode");e.style.visibility="hidden",e.style.zIndex="3",e.style.cursor="move",e.style.opacity="0.7",this.shadow=e},reset_shadow:function(e){var t=this.shadow.style;this.shadow.innerHTML=e.innerHTML,t.left=e.style.left,t.top=e.style.top,t.width=e.style.width,t.height=e.style.height,t.backgroundImage=e.style.backgroundImage,t.backgroundSize=e.style.backgroundSize,t.transform=e.style.transform,this.shadow_w=this.shadow.clientWidth,this.shadow_h=this.shadow.clientHeight},show_shadow:function(){this.moved||(this.shadow.style.visibility="visible")},hide_shadow:function(){this.shadow.style.visibility="hidden"},clear_lines:function(){r.clear(this.canvas_ctx,0,0,this.jm.view.size.w,this.jm.view.size.h)},_magnet_shadow:function(e){e&&(this.canvas_ctx.lineWidth=s.line_width,this.canvas_ctx.strokeStyle="rgba(0,0,0,0.3)",this.canvas_ctx.lineCap="round",this.clear_lines(),r.lineto(this.canvas_ctx,e.sp.x,e.sp.y,e.np.x,e.np.y))},_lookup_close_node:function(){var e,t,n=this.jm.get_root(),o=n.get_location(),r=n.get_size(),a=o.x+r.w/2,d=this.shadow_w,l=this.shadow_h,h=this.shadow.offsetLeft,u=this.shadow.offsetTop,c=h+d/2>=a?i.direction.right:i.direction.left,_=this.jm.mind.nodes,f=null,v=Number.MAX_VALUE,p=0,g=null,m=null,y=null;for(var b in _){var w,x;if(f=_[b],f.isroot||f.direction==c){if(f.id==this.active_node.id)continue;if(e=f.get_size(),t=f.get_location(),c==i.direction.right){if(h-t.x-e.w<=0)continue;p=Math.abs(h-t.x-e.w)+Math.abs(u+l/2-t.y-e.h/2),w={x:t.x+e.w-s.line_width,y:t.y+e.h/2},x={x:h+s.line_width,y:u+l/2}}else{if(t.x-h-d<=0)continue;p=Math.abs(h+d-t.x)+Math.abs(u+l/2-t.y-e.h/2),w={x:t.x+s.line_width,y:t.y+e.h/2},x={x:h+d-s.line_width,y:u+l/2}}p<v&&(g=f,m=w,y=x,v=p)}}var j=null;return g&&(j={node:g,direction:c,sp:y,np:m}),j},lookup_close_node:function(){var e=this._lookup_close_node();e&&(this._magnet_shadow(e),this.target_node=e.node,this.target_direct=e.direction)},_event_bind:function(){var e=this,t=this.jm.view.container;o.add_event(t,"mousedown",function(t){var n=t||event;e.dragstart.call(e,n)}),o.add_event(t,"mousemove",function(t){var n=t||event;e.drag.call(e,n)}),o.add_event(t,"mouseup",function(t){var n=t||event;e.dragend.call(e,n)}),o.add_event(t,"touchstart",function(t){var n=t||event;e.dragstart.call(e,n)}),o.add_event(t,"touchmove",function(t){var n=t||event;e.drag.call(e,n)}),o.add_event(t,"touchend",function(t){var n=t||event;e.dragend.call(e,n)})},dragstart:function(t){if(this.jm.get_editable()&&!this.capture){this.active_node=null;var n=this.jm.view,i=t.target||event.srcElement;if("jmnode"==i.tagName.toLowerCase()){var o=n.get_binded_nodeid(i);if(o){var r=this.jm.get_node(o);if(!r.isroot){this.reset_shadow(i),this.active_node=r,this.offset_x=(t.clientX||t.touches[0].clientX)-i.offsetLeft,this.offset_y=(t.clientY||t.touches[0].clientY)-i.offsetTop,this.client_hw=Math.floor(i.clientWidth/2),this.client_hh=Math.floor(i.clientHeight/2),0!=this.hlookup_delay&&e.clearTimeout(this.hlookup_delay),0!=this.hlookup_timer&&e.clearInterval(this.hlookup_timer);var a=this;this.hlookup_delay=e.setTimeout(function(){a.hlookup_delay=0,a.hlookup_timer=e.setInterval(function(){a.lookup_close_node.call(a)},s.lookup_interval)},s.lookup_delay),this.capture=!0}}}}},drag:function(e){if(this.jm.get_editable()&&this.capture){e.preventDefault(),this.show_shadow(),this.moved=!0,a();var t=(e.clientX||e.touches[0].clientX)-this.offset_x,n=(e.clientY||e.touches[0].clientY)-this.offset_y;this.client_hw,this.client_hh;this.shadow.style.left=t+"px",this.shadow.style.top=n+"px",a()}},dragend:function(t){if(this.jm.get_editable()){if(this.capture){if(0!=this.hlookup_delay&&(e.clearTimeout(this.hlookup_delay),this.hlookup_delay=0,this.clear_lines()),0!=this.hlookup_timer&&(e.clearInterval(this.hlookup_timer),this.hlookup_timer=0,this.clear_lines()),this.moved){var n=this.active_node,i=this.target_node,o=this.target_direct;this.move_node(n,i,o)}this.hide_shadow()}this.moved=!1,this.capture=!1}},move_node:function(e,t,n){var o=this.shadow.offsetTop;if(t&&e&&!i.node.inherited(e,t)){var r=t.children,a=r.length,s=null,d=Number.MAX_VALUE,l=null,h="_last_";while(a--)if(s=r[a],s.direction==n&&s.id!=e.id){var u=s.get_location().y-o;u>0&&u<d&&(d=u,l=s,h="_first_")}l&&(h=l.id),this.jm.move_node(e.id,h,t.id,n)}this.active_node=null,this.target_node=null,this.target_direct=null},jm_event_handle:function(e,t){e===i.event_type.resize&&this.resize()}};var d=new i.plugin("draggable",function(e){var t=new i.draggable(e);t.init(),e.add_event_listener(function(e,n){t.jm_event_handle.call(t,e,n)})});i.register_plugin(d)}})(window)},"41a0":function(e,t,n){"use strict";var i=n("2aeb"),o=n("4630"),r=n("7f20"),a={};n("32e9")(a,n("2b4c")("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(a,{next:o(1,n)}),r(e,t+" Iterator")}},4588:function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},4630:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},4917:function(e,t,n){"use strict";var i=n("cb7c"),o=n("9def"),r=n("0390"),a=n("5f1b");n("214f")("match",1,function(e,t,n,s){return[function(n){var i=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,i):new RegExp(n)[t](String(i))},function(e){var t=s(n,e,this);if(t.done)return t.value;var d=i(e),l=String(this);if(!d.global)return a(d,l);var h=d.unicode;d.lastIndex=0;var u,c=[],_=0;while(null!==(u=a(d,l))){var f=String(u[0]);c[_]=f,""===f&&(d.lastIndex=r(l,o(d.lastIndex),h)),_++}return 0===_?null:c}]})},"4bf8":function(e,t,n){var i=n("be13");e.exports=function(e){return Object(i(e))}},"520a":function(e,t,n){"use strict";var i=n("0bfb"),o=RegExp.prototype.exec,r=String.prototype.replace,a=o,s="lastIndex",d=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e[s]||0!==t[s]}(),l=void 0!==/()??/.exec("")[1],h=d||l;h&&(a=function(e){var t,n,a,h,u=this;return l&&(n=new RegExp("^"+u.source+"$(?!\\s)",i.call(u))),d&&(t=u[s]),a=o.call(u,e),d&&a&&(u[s]=u.global?a.index+a[0].length:t),l&&a&&a.length>1&&r.call(a[0],n,function(){for(h=1;h<arguments.length-2;h++)void 0===arguments[h]&&(a[h]=void 0)}),a}),e.exports=a},5537:function(e,t,n){var i=n("8378"),o=n("7726"),r="__core-js_shared__",a=o[r]||(o[r]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n("2d00")?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(e,t,n){var i=n("7726"),o=n("8378"),r=n("32e9"),a=n("2aba"),s=n("9b43"),d="prototype",l=function(e,t,n){var h,u,c,_,f=e&l.F,v=e&l.G,p=e&l.S,g=e&l.P,m=e&l.B,y=v?i:p?i[t]||(i[t]={}):(i[t]||{})[d],b=v?o:o[t]||(o[t]={}),w=b[d]||(b[d]={});for(h in v&&(n=t),n)u=!f&&y&&void 0!==y[h],c=(u?y:n)[h],_=m&&u?s(c,i):g&&"function"==typeof c?s(Function.call,c):c,y&&a(y,h,c,e&l.U),b[h]!=c&&r(b,h,_),g&&w[h]!=c&&(w[h]=c)};i.core=o,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},"5f1b":function(e,t,n){"use strict";var i=n("23c6"),o=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var r=n.call(e,t);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},"613b":function(e,t,n){var i=n("5537")("keys"),o=n("ca5a");e.exports=function(e){return i[e]||(i[e]=o(e))}},"626a":function(e,t,n){var i=n("2d95");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},6376:function(e,t,n){(function(t){(function(t){"use strict";var n="jsMind",i="0.4.6",o="hizzgdev@163.com",r=function(){},a="undefined"===typeof console?{log:r,debug:r,error:r,warn:r,info:r}:console;if(e.exports||"undefined"==typeof t[n]){var s=t.document,d=function(e){return s.getElementById(e)},l=function(e){return s.createElement(e)},h=function(e,t){e.hasChildNodes()?e.firstChild.nodeValue=t:e.appendChild(s.createTextNode(t))},u=function(e,t){e.innerHTML=t},c=function(e){return!!e&&"object"===typeof e&&1===e.nodeType&&"object"===typeof e.style&&"object"===typeof e.ownerDocument};"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e){return this.slice(0,e.length)===e});var _={container:"",editable:!1,theme:null,mode:"full",support_html:!0,view:{hmargin:100,vmargin:50,line_width:2,line_color:"#555"},layout:{hspace:30,vspace:20,pspace:13},default_event_handle:{enable_mousedown_handle:!0,enable_click_handle:!0,enable_dblclick_handle:!0},shortcut:{enable:!0,handles:{},mapping:{addchild:45,addbrother:13,editnode:113,delnode:46,toggle:32,left:37,up:38,right:39,down:40}}},f=function(e){f.current=this,this.version=i;var t={};f.util.json.merge(t,_),f.util.json.merge(t,e),t.container?(this.options=t,this.inited=!1,this.mind=null,this.event_handles=[],this.init()):a.error("the options.container should not be null or empty.")};f.direction={left:-1,center:0,right:1},f.event_type={show:1,resize:2,edit:3,select:4},f.node=function(e,t,n,i,o,r,s,d){e?"number"==typeof t?("undefined"===typeof d&&(d=!0),this.id=e,this.index=t,this.topic=n,this.data=i||{},this.isroot=o,this.parent=r,this.direction=s,this.expanded=!!d,this.children=[],this._data={}):a.error("invalid node index"):a.error("invalid nodeid")},f.node.compare=function(e,t){var n=0,i=e.index,o=t.index;return n=i>=0&&o>=0?i-o:-1==i&&-1==o?0:-1==i?1:-1==o?-1:0,n},f.node.inherited=function(e,t){if(e&&t){if(e.id===t.id)return!0;if(e.isroot)return!0;var n=e.id,i=t;while(!i.isroot)if(i=i.parent,i.id===n)return!0}return!1},f.node.prototype={get_location:function(){var e=this._data.view;return{x:e.abs_x,y:e.abs_y}},get_size:function(){var e=this._data.view;return{w:e.width,h:e.height}}},f.mind=function(){this.name=null,this.author=null,this.version=null,this.root=null,this.selected=null,this.nodes={}},f.mind.prototype={get_node:function(e){return e in this.nodes?this.nodes[e]:(a.warn("the node[id="+e+"] can not be found"),null)},set_root:function(e,t,n){null==this.root?(this.root=new f.node(e,0,t,n,!0),this._put_node(this.root)):a.error("root node is already exist")},add_node:function(e,t,n,i,o,r,s){if(!f.util.is_node(e)){var d=this.get_node(e);return d?this.add_node(d,t,n,i,o,r,s):(a.error("the parent_node[id="+e+"] can not be found."),null)}var l=o||-1,h=null;if(e.isroot){var u=f.direction.right;if(isNaN(r)){for(var c=e.children,_=c.length,v=0,p=0;p<_;p++)c[p].direction===f.direction.left?v--:v++;u=_>1&&v>0?f.direction.left:f.direction.right}else u=r!=f.direction.left?f.direction.right:f.direction.left;h=new f.node(t,l,n,i,!1,e,u,s)}else h=new f.node(t,l,n,i,!1,e,e.direction,s);return this._put_node(h)?(e.children.push(h),this._reindex(e)):(a.error("fail, the nodeid '"+h.id+"' has been already exist."),h=null),h},insert_node_before:function(e,t,n,i){if(!f.util.is_node(e)){var o=this.get_node(e);return o?this.insert_node_before(o,t,n,i):(a.error("the node_before[id="+e+"] can not be found."),null)}var r=e.index-.5;return this.add_node(e.parent,t,n,i,r)},get_node_before:function(e){if(!f.util.is_node(e)){var t=this.get_node(e);return t?this.get_node_before(t):(a.error("the node[id="+e+"] can not be found."),null)}if(e.isroot)return null;var n=e.index-2;return n>=0?e.parent.children[n]:null},insert_node_after:function(e,t,n,i){if(!f.util.is_node(e)){var o=this.get_node(node_before);return o?this.insert_node_after(o,t,n,i):(a.error("the node_after[id="+e+"] can not be found."),null)}var r=e.index+.5;return this.add_node(e.parent,t,n,i,r)},get_node_after:function(e){if(!f.util.is_node(e)){var t=this.get_node(e);return t?this.get_node_after(t):(a.error("the node[id="+e+"] can not be found."),null)}if(e.isroot)return null;var n=e.index,i=e.parent.children;return i.length>=n?e.parent.children[n]:null},move_node:function(e,t,n,i){if(!f.util.is_node(e)){var o=this.get_node(e);return o?this.move_node(o,t,n,i):(a.error("the node[id="+e+"] can not be found."),null)}return n||(n=e.parent.id),this._move_node(e,t,n,i)},_flow_node_direction:function(e,t){"undefined"===typeof t?t=e.direction:e.direction=t;var n=e.children.length;while(n--)this._flow_node_direction(e.children[n],t)},_move_node_internal:function(e,t){if(e&&t)if("_last_"==t)e.index=-1,this._reindex(e.parent);else if("_first_"==t)e.index=0,this._reindex(e.parent);else{var n=t?this.get_node(t):null;null!=n&&null!=n.parent&&n.parent.id==e.parent.id&&(e.index=n.index-.5,this._reindex(e.parent))}return e},_move_node:function(e,t,n,i){if(e&&n){if(e.parent.id!=n){var o=e.parent.children,r=o.length;while(r--)if(o[r].id==e.id){o.splice(r,1);break}e.parent=this.get_node(n),e.parent.children.push(e)}e.parent.isroot?i==jsMind.direction.left?e.direction=i:e.direction=f.direction.right:e.direction=e.parent.direction,this._move_node_internal(e,t),this._flow_node_direction(e)}return e},remove_node:function(e){if(!f.util.is_node(e)){var t=this.get_node(e);return t?this.remove_node(t):(a.error("the node[id="+e+"] can not be found."),!1)}if(!e)return a.error("fail, the node can not be found"),!1;if(e.isroot)return a.error("fail, can not remove root node"),!1;null!=this.selected&&this.selected.id==e.id&&(this.selected=null);var n=e.children,i=n.length;while(i--)this.remove_node(n[i]);n.length=0;var o=e.parent.children,r=o.length;while(r--)if(o[r].id==e.id){o.splice(r,1);break}for(var s in delete this.nodes[e.id],e)delete e[s];return e=null,!0},_put_node:function(e){return e.id in this.nodes?(a.warn("the nodeid '"+e.id+"' has been already exist."),!1):(this.nodes[e.id]=e,!0)},_reindex:function(e){if(e instanceof f.node){e.children.sort(f.node.compare);for(var t=0;t<e.children.length;t++)e.children[t].index=t+1}}},f.format={node_tree:{example:{meta:{name:n,author:o,version:i},format:"node_tree",data:{id:"root",topic:"jsMind Example"}},get_mind:function(e){var t=f.format.node_tree,n=new f.mind;return n.name=e.meta.name,n.author=e.meta.author,n.version=e.meta.version,t._parse(n,e.data),n},get_data:function(e){var t=f.format.node_tree,n={};return n.meta={name:e.name,author:e.author,version:e.version},n.format="node_tree",n.data=t._buildnode(e.root),n},_parse:function(e,t){var n=f.format.node_tree,i=n._extract_data(t);if(e.set_root(t.id,t.topic,i),"children"in t)for(var o=t.children,r=0;r<o.length;r++)n._extract_subnode(e,e.root,o[r])},_extract_data:function(e){var t={};for(var n in e)"id"!=n&&"topic"!=n&&"children"!=n&&"direction"!=n&&"expanded"!=n&&(t[n]=e[n]);return t},_extract_subnode:function(e,t,n){var i=f.format.node_tree,o=i._extract_data(n),r=null;t.isroot&&(r="left"==n.direction?f.direction.left:f.direction.right);var a=e.add_node(t,n.id,n.topic,o,null,r,n.expanded);if("children"in n)for(var s=n.children,d=0;d<s.length;d++)i._extract_subnode(e,a,s[d])},_buildnode:function(e){var t=f.format.node_tree;if(e instanceof f.node){var n={id:e.id,topic:e.topic,expanded:e.expanded};if(e.parent&&e.parent.isroot&&(n.direction=e.direction==f.direction.left?"left":"right"),null!=e.data){var i=e.data;for(var o in i)n[o]=i[o]}var r=e.children;if(r.length>0){n.children=[];for(var a=0;a<r.length;a++)n.children.push(t._buildnode(r[a]))}return n}}},node_array:{example:{meta:{name:n,author:o,version:i},format:"node_array",data:[{id:"root",topic:"jsMind Example",isroot:!0}]},get_mind:function(e){var t=f.format.node_array,n=new f.mind;return n.name=e.meta.name,n.author=e.meta.author,n.version=e.meta.version,t._parse(n,e.data),n},get_data:function(e){var t=f.format.node_array,n={};return n.meta={name:e.name,author:e.author,version:e.version},n.format="node_array",n.data=[],t._array(e,n.data),n},_parse:function(e,t){var n=f.format.node_array,i=t.slice(0);i.reverse();var o=n._extract_root(e,i);o?n._extract_subnode(e,o,i):a.error("root node can not be found")},_extract_root:function(e,t){var n=f.format.node_array,i=t.length;while(i--)if("isroot"in t[i]&&t[i].isroot){var o=t[i],r=n._extract_data(o);return e.set_root(o.id,o.topic,r),t.splice(i,1),o.id}return null},_extract_subnode:function(e,t,n){var i=f.format.node_array,o=n.length,r=null,a=null,s=0;while(o--)if(r=n[o],r.parentid==t){a=i._extract_data(r);var d=null,l=r.direction;l&&(d="left"==l?f.direction.left:f.direction.right),e.add_node(t,r.id,r.topic,a,null,d,r.expanded),n.splice(o,1),s++;var h=i._extract_subnode(e,r.id,n);h>0&&(o=n.length,s+=h)}return s},_extract_data:function(e){var t={};for(var n in e)"id"!=n&&"topic"!=n&&"parentid"!=n&&"isroot"!=n&&"direction"!=n&&"expanded"!=n&&(t[n]=e[n]);return t},_array:function(e,t){var n=f.format.node_array;n._array_node(e.root,t)},_array_node:function(e,t){var n=f.format.node_array;if(e instanceof f.node){var i={id:e.id,topic:e.topic,expanded:e.expanded};if(e.parent&&(i.parentid=e.parent.id),e.isroot&&(i.isroot=!0),e.parent&&e.parent.isroot&&(i.direction=e.direction==f.direction.left?"left":"right"),null!=e.data){var o=e.data;for(var r in o)i[r]=o[r]}t.push(i);for(var a=e.children.length,s=0;s<a;s++)n._array_node(e.children[s],t)}}},freemind:{example:{meta:{name:n,author:o,version:i},format:"freemind",data:'<map version="1.0.1"><node ID="root" TEXT="freemind Example"/></map>'},get_mind:function(e){var t=f.format.freemind,n=new f.mind;n.name=e.meta.name,n.author=e.meta.author,n.version=e.meta.version;var i=e.data,o=t._parse_xml(i),r=t._find_root(o);return t._load_node(n,null,r),n},get_data:function(e){var t=f.format.freemind,n={};n.meta={name:e.name,author:e.author,version:e.version},n.format="freemind";var i=[];return i.push('<map version="1.0.1">'),t._buildmap(e.root,i),i.push("</map>"),n.data=i.join(" "),n},_parse_xml:function(e){var t=null;if(window.DOMParser){var n=new DOMParser;t=n.parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e);return t},_find_root:function(e){for(var t=e.childNodes,n=null,i=null,o=0;o<t.length;o++)if(i=t[o],1==i.nodeType&&"map"==i.tagName){n=i;break}if(n){var r=n.childNodes;n=null;for(o=0;o<r.length;o++)if(i=r[o],1==i.nodeType&&"node"==i.tagName){n=i;break}}return n},_load_node:function(e,t,n){var i=f.format.freemind,o=n.getAttribute("ID"),r=n.getAttribute("TEXT");if(null==r)for(var a=n.childNodes,s=null,d=0;d<a.length;d++)if(s=a[d],1==s.nodeType&&"richcontent"===s.tagName){r=s.textContent;break}var l=i._load_attributes(n),h=!("expanded"in l)||"true"==l.expanded;delete l.expanded;var u=n.getAttribute("POSITION"),c=null;u&&(c="left"==u?f.direction.left:f.direction.right),t?e.add_node(t,o,r,l,null,c,h):e.set_root(o,r,l);var _=n.childNodes,v=null;for(d=0;d<_.length;d++)v=_[d],1==v.nodeType&&"node"==v.tagName&&i._load_node(e,o,v)},_load_attributes:function(e){for(var t=e.childNodes,n=null,i={},o=0;o<t.length;o++)n=t[o],1==n.nodeType&&"attribute"===n.tagName&&(i[n.getAttribute("NAME")]=n.getAttribute("VALUE"));return i},_buildmap:function(e,t){var n=f.format.freemind,i=null;e.parent&&e.parent.isroot&&(i=e.direction===f.direction.left?"left":"right"),t.push("<node"),t.push('ID="'+e.id+'"'),i&&t.push('POSITION="'+i+'"'),t.push('TEXT="'+e.topic+'">'),t.push('<attribute NAME="expanded" VALUE="'+e.expanded+'"/>');var o=e.data;if(null!=o)for(var r in o)t.push('<attribute NAME="'+r+'" VALUE="'+o[r]+'"/>');for(var a=e.children,s=0;s<a.length;s++)n._buildmap(a[s],t);t.push("</node>")}}},f.util={is_node:function(e){return!!e&&e instanceof f.node},ajax:{_xhr:function(){var e=null;if(window.XMLHttpRequest)e=new XMLHttpRequest;else try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}return e},_eurl:function(e){return encodeURIComponent(e)},request:function(e,t,n,i,o){var r=f.util.ajax,s=null,d=[];for(var l in t)d.push(r._eurl(l)+"="+r._eurl(t[l]));d.length>0&&(s=d.join("&"));var h=r._xhr();h&&(h.onreadystatechange=function(){if(4==h.readyState)if(200==h.status||0==h.status){if("function"===typeof i){var e=f.util.json.string2json(h.responseText);i(null!=e?e:h.responseText)}}else"function"===typeof o?o(h):a.error("xhr request failed.",h)},n=n||"GET",h.open(n,e,!0),h.setRequestHeader("If-Modified-Since","0"),"POST"==n?(h.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),h.send(s)):h.send())},get:function(e,t){return f.util.ajax.request(e,{},"GET",t)},post:function(e,t,n){return f.util.ajax.request(e,t,"POST",n)}},dom:{add_event:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}},canvas:{bezierto:function(e,t,n,i,o){e.beginPath(),e.moveTo(t,n),e.bezierCurveTo(t+2*(i-t)/3,n,t,o,i,o),e.stroke()},lineto:function(e,t,n,i,o){e.beginPath(),e.moveTo(t,n),e.lineTo(i,o),e.stroke()},clear:function(e,t,n,i,o){e.clearRect(t,n,i,o)}},file:{read:function(e,t){var n=new FileReader;n.onload=function(){"function"===typeof t&&t(this.result,e.name)},n.readAsText(e)},save:function(e,n,i){var o;if("function"===typeof t.Blob)o=new Blob([e],{type:n});else{var r=t.BlobBuilder||t.MozBlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder,a=new r;a.append(e),o=a.getBlob(n)}if(navigator.msSaveBlob)navigator.msSaveBlob(o,i);else{var d=t.URL||t.webkitURL,h=d.createObjectURL(o),u=l("a");if("download"in u){u.style.visibility="hidden",u.href=h,u.download=i,s.body.appendChild(u);var c=s.createEvent("MouseEvents");c.initEvent("click",!0,!0),u.dispatchEvent(c),s.body.removeChild(u)}else location.href=h}}},json:{json2string:function(e){if(JSON)try{var t=JSON.stringify(e);return t}catch(n){return a.warn(n),a.warn("can not convert to string"),null}},string2json:function(e){if(JSON)try{var t=JSON.parse(e);return t}catch(n){return a.warn(n),a.warn("can not parse to json"),null}},merge:function(e,t){for(var n in t)n in e?"object"!==typeof e[n]||"[object object]"!=Object.prototype.toString.call(e[n]).toLowerCase()||e[n].length?e[n]=t[n]:f.util.json.merge(e[n],t[n]):e[n]=t[n];return e}},uuid:{newid:function(){return((new Date).getTime().toString(16)+Math.random().toString(16).substr(2)).substr(2,16)}},text:{is_empty:function(e){return!e||0==e.replace(/\s*/,"").length}}},f.prototype={init:function(){if(!this.inited){this.inited=!0;var e=this.options,t={mode:e.mode,hspace:e.layout.hspace,vspace:e.layout.vspace,pspace:e.layout.pspace},n={container:e.container,support_html:e.support_html,hmargin:e.view.hmargin,vmargin:e.view.vmargin,line_width:e.view.line_width,line_color:e.view.line_color};this.data=new f.data_provider(this),this.layout=new f.layout_provider(this,t),this.view=new f.view_provider(this,n),this.shortcut=new f.shortcut_provider(this,e.shortcut),this.data.init(),this.layout.init(),this.view.init(),this.shortcut.init(),this._event_bind(),f.init_plugins(this)}},enable_edit:function(){this.options.editable=!0},disable_edit:function(){this.options.editable=!1},enable_event_handle:function(e){this.options.default_event_handle["enable_"+e+"_handle"]=!0},disable_event_handle:function(e){this.options.default_event_handle["enable_"+e+"_handle"]=!1},get_editable:function(){return this.options.editable},set_theme:function(e){var t=this.options.theme;this.options.theme=e||null,t!=this.options.theme&&(this.view.reset_theme(),this.view.reset_custom_style())},_event_bind:function(){this.view.add_event(this,"mousedown",this.mousedown_handle),this.view.add_event(this,"click",this.click_handle),this.view.add_event(this,"dblclick",this.dblclick_handle)},mousedown_handle:function(e){if(this.options.default_event_handle["enable_mousedown_handle"]){var t=e.target||event.srcElement,n=this.view.get_binded_nodeid(t);n?this.select_node(n):this.select_clear()}},click_handle:function(e){if(this.options.default_event_handle["enable_click_handle"]){var t=e.target||event.srcElement,n=this.view.is_expander(t);if(n){var i=this.view.get_binded_nodeid(t);i&&this.toggle_node(i)}}},dblclick_handle:function(e){if(this.options.default_event_handle["enable_dblclick_handle"]&&this.get_editable()){var t=e.target||event.srcElement,n=this.view.get_binded_nodeid(t);n&&this.begin_edit(n)}},begin_edit:function(e){if(!f.util.is_node(e)){var t=this.get_node(e);return t?this.begin_edit(t):(a.error("the node[id="+e+"] can not be found."),!1)}this.get_editable()?this.view.edit_node_begin(e):a.error("fail, this mind map is not editable.")},end_edit:function(){this.view.edit_node_end()},toggle_node:function(e){if(!f.util.is_node(e)){var t=this.get_node(e);return t?this.toggle_node(t):void a.error("the node[id="+e+"] can not be found.")}e.isroot||(this.view.save_location(e),this.layout.toggle_node(e),this.view.relayout(),this.view.restore_location(e))},expand_node:function(e){if(!f.util.is_node(e)){var t=this.get_node(e);return t?this.expand_node(t):void a.error("the node[id="+e+"] can not be found.")}e.isroot||(this.view.save_location(e),this.layout.expand_node(e),this.view.relayout(),this.view.restore_location(e))},collapse_node:function(e){if(!f.util.is_node(e)){var t=this.get_node(e);return t?this.collapse_node(t):void a.error("the node[id="+e+"] can not be found.")}e.isroot||(this.view.save_location(e),this.layout.collapse_node(e),this.view.relayout(),this.view.restore_location(e))},expand_all:function(){this.layout.expand_all(),this.view.relayout()},collapse_all:function(){this.layout.collapse_all(),this.view.relayout()},expand_to_depth:function(e){this.layout.expand_to_depth(e),this.view.relayout()},_reset:function(){this.view.reset(),this.layout.reset(),this.data.reset()},_show:function(e){var t=e||f.format.node_array.example;this.mind=this.data.load(t),this.mind?(a.debug("data.load ok"),this.view.load(),a.debug("view.load ok"),this.layout.layout(),a.debug("layout.layout ok"),this.view.show(!0),a.debug("view.show ok"),this.invoke_event_handle(f.event_type.show,{data:[e]})):a.error("data.load error")},show:function(e){this._reset(),this._show(e)},get_meta:function(){return{name:this.mind.name,author:this.mind.author,version:this.mind.version}},get_data:function(e){var t=e||"node_tree";return this.data.get_data(t)},get_root:function(){return this.mind.root},get_node:function(e){return this.mind.get_node(e)},add_node:function(e,t,n,i){if(this.get_editable()){var o=this.mind.add_node(e,t,n,i);return o&&(this.view.add_node(o),this.layout.layout(),this.view.show(!1),this.view.reset_node_custom_style(o),this.expand_node(e),this.invoke_event_handle(f.event_type.edit,{evt:"add_node",data:[e.id,t,n,i],node:t})),o}return a.error("fail, this mind map is not editable"),null},insert_node_before:function(e,t,n,i){if(this.get_editable()){var o=f.util.is_node(e)?e.id:e,r=this.mind.insert_node_before(e,t,n,i);return r&&(this.view.add_node(r),this.layout.layout(),this.view.show(!1),this.invoke_event_handle(f.event_type.edit,{evt:"insert_node_before",data:[o,t,n,i],node:t})),r}return a.error("fail, this mind map is not editable"),null},insert_node_after:function(e,t,n,i){if(this.get_editable()){var o=f.util.is_node(e)?e.id:e,r=this.mind.insert_node_after(e,t,n,i);return r&&(this.view.add_node(r),this.layout.layout(),this.view.show(!1),this.invoke_event_handle(f.event_type.edit,{evt:"insert_node_after",data:[o,t,n,i],node:t})),r}return a.error("fail, this mind map is not editable"),null},remove_node:function(e){if(!f.util.is_node(e)){var t=this.get_node(e);return t?this.remove_node(t):(a.error("the node[id="+e+"] can not be found."),!1)}if(this.get_editable()){if(e.isroot)return a.error("fail, can not remove root node"),!1;var n=e.id,i=e.parent.id,o=this.get_node(i);return this.view.save_location(o),this.view.remove_node(e),this.mind.remove_node(e),this.layout.layout(),this.view.show(!1),this.view.restore_location(o),this.invoke_event_handle(f.event_type.edit,{evt:"remove_node",data:[n],node:i}),!0}return a.error("fail, this mind map is not editable"),!1},update_node:function(e,t){if(this.get_editable())if(f.util.text.is_empty(t))a.warn("fail, topic can not be empty");else{var n=this.get_node(e);if(n){if(n.topic===t)return a.info("nothing changed"),void this.view.update_node(n);n.topic=t,this.view.update_node(n),this.layout.layout(),this.view.show(!1),this.invoke_event_handle(f.event_type.edit,{evt:"update_node",data:[e,t],node:e})}}else a.error("fail, this mind map is not editable")},move_node:function(e,t,n,i){if(this.get_editable()){var o=this.mind.move_node(e,t,n,i);o&&(this.view.update_node(o),this.layout.layout(),this.view.show(!1),this.invoke_event_handle(f.event_type.edit,{evt:"move_node",data:[e,t,n,i],node:e}))}else a.error("fail, this mind map is not editable")},select_node:function(e){if(!f.util.is_node(e)){var t=this.get_node(e);return t?this.select_node(t):void a.error("the node[id="+e+"] can not be found.")}this.layout.is_visible(e)&&(this.mind.selected=e,this.view.select_node(e))},get_selected_node:function(){return this.mind?this.mind.selected:null},select_clear:function(){this.mind&&(this.mind.selected=null,this.view.select_clear())},is_node_visible:function(e){return this.layout.is_visible(e)},find_node_before:function(e){if(!f.util.is_node(e)){var t=this.get_node(e);return t?this.find_node_before(t):void a.error("the node[id="+e+"] can not be found.")}if(e.isroot)return null;var n=null;if(e.parent.isroot)for(var i=e.parent.children,o=null,r=null,s=0;s<i.length;s++)r=i[s],e.direction===r.direction&&(e.id===r.id&&(n=o),o=r);else n=this.mind.get_node_before(e);return n},find_node_after:function(e){if(!f.util.is_node(e)){var t=this.get_node(e);return t?this.find_node_after(t):void a.error("the node[id="+e+"] can not be found.")}if(e.isroot)return null;var n=null;if(e.parent.isroot){for(var i=e.parent.children,o=!1,r=null,s=0;s<i.length;s++)if(r=i[s],e.direction===r.direction){if(o){n=r;break}e.id===r.id&&(o=!0)}}else n=this.mind.get_node_after(e);return n},set_node_color:function(e,t,n){if(!this.get_editable())return a.error("fail, this mind map is not editable"),null;var i=this.mind.get_node(e);i&&(t&&(i.data["background-color"]=t),n&&(i.data["foreground-color"]=n),this.view.reset_node_custom_style(i))},set_node_font_style:function(e,t,n,i){if(!this.get_editable())return a.error("fail, this mind map is not editable"),null;var o=this.mind.get_node(e);o&&(t&&(o.data["font-size"]=t),n&&(o.data["font-weight"]=n),i&&(o.data["font-style"]=i),this.view.reset_node_custom_style(o),this.view.update_node(o),this.layout.layout(),this.view.show(!1))},set_node_background_image:function(e,t,n,i,o){if(!this.get_editable())return a.error("fail, this mind map is not editable"),null;var r=this.mind.get_node(e);r&&(t&&(r.data["background-image"]=t),n&&(r.data["width"]=n),i&&(r.data["height"]=i),o&&(r.data["background-rotation"]=o),this.view.reset_node_custom_style(r),this.view.update_node(r),this.layout.layout(),this.view.show(!1))},set_node_background_rotation:function(e,t){if(!this.get_editable())return a.error("fail, this mind map is not editable"),null;var n=this.mind.get_node(e);if(n){if(!n.data["background-image"])return a.error("fail, only can change rotation angle of node with background image"),null;n.data["background-rotation"]=t,this.view.reset_node_custom_style(n),this.view.update_node(n),this.layout.layout(),this.view.show(!1)}},resize:function(){this.view.resize()},add_event_listener:function(e){"function"===typeof e&&this.event_handles.push(e)},invoke_event_handle:function(e,n){var i=this;t.setTimeout(function(){i._invoke_event_handle(e,n)},0)},_invoke_event_handle:function(e,t){for(var n=this.event_handles.length,i=0;i<n;i++)this.event_handles[i](e,t)}},f.data_provider=function(e){this.jm=e},f.data_provider.prototype={init:function(){a.debug("data.init")},reset:function(){a.debug("data.reset")},load:function(e){var t=null,n=null;return t="object"===typeof e?e.format?e.format:"node_tree":"freemind","node_array"==t?n=f.format.node_array.get_mind(e):"node_tree"==t?n=f.format.node_tree.get_mind(e):"freemind"==t?n=f.format.freemind.get_mind(e):a.warn("unsupported format"),n},get_data:function(e){var t=null;return"node_array"==e?t=f.format.node_array.get_data(this.jm.mind):"node_tree"==e?t=f.format.node_tree.get_data(this.jm.mind):"freemind"==e?t=f.format.freemind.get_data(this.jm.mind):a.error("unsupported "+e+" format"),t}},f.layout_provider=function(e,t){this.opts=t,this.jm=e,this.isside="side"==this.opts.mode,this.bounds=null,this.cache_valid=!1},f.layout_provider.prototype={init:function(){a.debug("layout.init")},reset:function(){a.debug("layout.reset"),this.bounds={n:0,s:0,w:0,e:0}},layout:function(){a.debug("layout.layout"),this.layout_direction(),this.layout_offset()},layout_direction:function(){this._layout_direction_root()},_layout_direction_root:function(){var e=this.jm.mind.root,t=null;"layout"in e._data?t=e._data.layout:(t={},e._data.layout=t);var n=e.children,i=n.length;if(t.direction=f.direction.center,t.side_index=0,this.isside){var o=i;while(o--)this._layout_direction_side(n[o],f.direction.right,o)}else{o=i;var r=null;while(o--)r=n[o],r.direction==f.direction.left?this._layout_direction_side(r,f.direction.left,o):this._layout_direction_side(r,f.direction.right,o)}},_layout_direction_side:function(e,t,n){var i=null;"layout"in e._data?i=e._data.layout:(i={},e._data.layout=i);var o=e.children,r=o.length;i.direction=t,i.side_index=n;var a=r;while(a--)this._layout_direction_side(o[a],t,a)},layout_offset:function(){var e=this.jm.mind.root,t=e._data.layout;t.offset_x=0,t.offset_y=0,t.outer_height=0;var n=e.children,i=n.length,o=[],r=[],a=null;while(i--)a=n[i],a._data.layout.direction==f.direction.right?r.unshift(a):o.unshift(a);t.left_nodes=o,t.right_nodes=r,t.outer_height_left=this._layout_offset_subnodes(o),t.outer_height_right=this._layout_offset_subnodes(r),this.bounds.e=e._data.view.width/2,this.bounds.w=0-this.bounds.e,this.bounds.n=0,this.bounds.s=Math.max(t.outer_height_left,t.outer_height_right)},_layout_offset_subnodes:function(e){var t=0,n=e.length,i=n,o=null,r=0,a=null,s=0,d=null;while(i--)o=e[i],a=o._data.layout,null==d&&(d=o.parent._data),r=this._layout_offset_subnodes(o.children),o.expanded||(r=0,this.set_visible(o.children,!1)),r=Math.max(o._data.view.height,r),a.outer_height=r,a.offset_y=s-r/2,a.offset_x=this.opts.hspace*a.direction+d.view.width*(d.layout.direction+a.direction)/2,o.parent.isroot||(a.offset_x+=this.opts.pspace*a.direction),s=s-r-this.opts.vspace,t+=r;n>1&&(t+=this.opts.vspace*(n-1)),i=n;var l=t/2;while(i--)o=e[i],o._data.layout.offset_y+=l;return t},_layout_offset_subnodes_height:function(e){var t=0,n=e.length,i=n,o=null,r=0,a=null,s=0,d=null;while(i--)o=e[i],a=o._data.layout,null==d&&(d=o.parent._data),r=this._layout_offset_subnodes_height(o.children),o.expanded||(r=0),r=Math.max(o._data.view.height,r),a.outer_height=r,a.offset_y=s-r/2,s=s-r-this.opts.vspace,t+=r;n>1&&(t+=this.opts.vspace*(n-1)),i=n;var l=t/2;while(i--)o=e[i],o._data.layout.offset_y+=l;return t},get_node_offset:function(e){var t=e._data.layout,n=null;if("_offset_"in t&&this.cache_valid?n=t._offset_:(n={x:-1,y:-1},t._offset_=n),-1==n.x||-1==n.y){var i=t.offset_x,o=t.offset_y;if(!e.isroot){var r=this.get_node_offset(e.parent);i+=r.x,o+=r.y}n.x=i,n.y=o}return n},get_node_point:function(e){var t=e._data.view,n=this.get_node_offset(e),i={};return i.x=n.x+t.width*(e._data.layout.direction-1)/2,i.y=n.y-t.height/2,i},get_node_point_in:function(e){var t=this.get_node_offset(e);return t},get_node_point_out:function(e){var t=e._data.layout,n=null;if("_pout_"in t&&this.cache_valid?n=t._pout_:(n={x:-1,y:-1},t._pout_=n),-1==n.x||-1==n.y)if(e.isroot)n.x=0,n.y=0;else{var i=e._data.view,o=this.get_node_offset(e);n.x=o.x+(i.width+this.opts.pspace)*e._data.layout.direction,n.y=o.y}return n},get_expander_point:function(e){var t=this.get_node_point_out(e),n={};return e._data.layout.direction==f.direction.right?n.x=t.x-this.opts.pspace:n.x=t.x,n.y=t.y-Math.ceil(this.opts.pspace/2),n},get_min_size:function(){var e=this.jm.mind.nodes,t=null,n=null;for(var i in e)t=e[i],n=this.get_node_point_out(t),n.x>this.bounds.e&&(this.bounds.e=n.x),n.x<this.bounds.w&&(this.bounds.w=n.x);return{w:this.bounds.e-this.bounds.w,h:this.bounds.s-this.bounds.n}},toggle_node:function(e){e.isroot||(e.expanded?this.collapse_node(e):this.expand_node(e))},expand_node:function(e){e.expanded=!0,this.part_layout(e),this.set_visible(e.children,!0)},collapse_node:function(e){e.expanded=!1,this.part_layout(e),this.set_visible(e.children,!1)},expand_all:function(){var e,t=this.jm.mind.nodes,n=0;for(var i in t)e=t[i],e.expanded||(e.expanded=!0,n++);if(n>0){var o=this.jm.mind.root;this.part_layout(o),this.set_visible(o.children,!0)}},collapse_all:function(){var e,t=this.jm.mind.nodes,n=0;for(var i in t)e=t[i],e.expanded&&!e.isroot&&(e.expanded=!1,n++);if(n>0){var o=this.jm.mind.root;this.part_layout(o),this.set_visible(o.children,!0)}},expand_to_depth:function(e,t,n){if(!(e<1)){var i=t||this.jm.mind.root.children,o=n||1,r=i.length,a=null;while(r--)a=i[r],o<e&&(a.expanded||this.expand_node(a),this.expand_to_depth(e,a.children,o+1)),o==e&&a.expanded&&this.collapse_node(a)}},part_layout:function(e){var t=this.jm.mind.root;if(t){var n=t._data.layout;e.isroot?(n.outer_height_right=this._layout_offset_subnodes_height(n.right_nodes),n.outer_height_left=this._layout_offset_subnodes_height(n.left_nodes)):e._data.layout.direction==f.direction.right?n.outer_height_right=this._layout_offset_subnodes_height(n.right_nodes):n.outer_height_left=this._layout_offset_subnodes_height(n.left_nodes),this.bounds.s=Math.max(n.outer_height_left,n.outer_height_right),this.cache_valid=!1}else a.warn("can not found root node")},set_visible:function(e,t){var n=e.length,i=null;while(n--)i=e[n],i._data.layout,i.expanded?this.set_visible(i.children,t):this.set_visible(i.children,!1),i.isroot||(i._data.layout.visible=t)},is_expand:function(e){return e.expanded},is_visible:function(e){var t=e._data.layout;return!("visible"in t&&!t.visible)}},f.view_provider=function(e,t){this.opts=t,this.jm=e,this.layout=e.layout,this.container=null,this.e_panel=null,this.e_nodes=null,this.e_canvas=null,this.canvas_ctx=null,this.size={w:0,h:0},this.selected_node=null,this.editing_node=null},f.view_provider.prototype={init:function(){if(a.debug("view.init"),this.container=c(this.opts.container)?this.opts.container:d(this.opts.container),this.container){this.e_panel=l("div"),this.e_canvas=l("canvas"),this.e_nodes=l("jmnodes"),this.e_editor=l("input"),this.e_panel.className="jsmind-inner",this.e_panel.appendChild(this.e_canvas),this.e_panel.appendChild(this.e_nodes),this.e_editor.className="jsmind-editor",this.e_editor.type="text",this.actualZoom=1,this.zoomStep=.1,this.minZoom=.5,this.maxZoom=2;var e=this;f.util.dom.add_event(this.e_editor,"keydown",function(t){var n=t||event;13==n.keyCode&&(e.edit_node_end(),n.stopPropagation())}),f.util.dom.add_event(this.e_editor,"blur",function(t){e.edit_node_end()}),this.container.appendChild(this.e_panel),this.init_canvas()}else a.error("the options.view.container was not be found in dom")},add_event:function(e,t,n){f.util.dom.add_event(this.e_nodes,t,function(t){var i=t||event;n.call(e,i)})},get_binded_nodeid:function(e){if(null==e)return null;var t=e.tagName.toLowerCase();return"jmnodes"==t||"body"==t||"html"==t?null:"jmnode"==t||"jmexpander"==t?e.getAttribute("nodeid"):this.get_binded_nodeid(e.parentElement)},is_expander:function(e){return"jmexpander"==e.tagName.toLowerCase()},reset:function(){a.debug("view.reset"),this.selected_node=null,this.clear_lines(),this.clear_nodes(),this.reset_theme()},reset_theme:function(){var e=this.jm.options.theme;this.e_nodes.className=e?"theme-"+e:""},reset_custom_style:function(){var e=this.jm.mind.nodes;for(var t in e)this.reset_node_custom_style(e[t])},load:function(){a.debug("view.load"),this.init_nodes()},expand_size:function(){var e=this.layout.get_min_size(),t=e.w+2*this.opts.hmargin,n=e.h+2*this.opts.vmargin,i=this.e_panel.clientWidth,o=this.e_panel.clientHeight;i<t&&(i=t),o<n&&(o=n),this.size.w=i,this.size.h=o},init_canvas:function(){var e=this.e_canvas.getContext("2d");this.canvas_ctx=e},init_nodes_size:function(e){var t=e._data.view;t.width=t.element.clientWidth,t.height=t.element.clientHeight},init_nodes:function(){var e=this.jm.mind.nodes,t=s.createDocumentFragment();for(var n in e)this.create_node_element(e[n],t);for(var n in this.e_nodes.appendChild(t),e)this.init_nodes_size(e[n])},add_node:function(e){this.create_node_element(e,this.e_nodes),this.init_nodes_size(e)},create_node_element:function(e,t){var n=null;"view"in e._data?n=e._data.view:(n={},e._data.view=n);var i=l("jmnode");if(e.isroot)i.className="root";else{var o=l("jmexpander");h(o,"-"),o.setAttribute("nodeid",e.id),o.style.visibility="hidden",t.appendChild(o),n.expander=o}e.topic&&(this.opts.support_html?u(i,e.topic):h(i,e.topic)),i.setAttribute("nodeid",e.id),i.style.visibility="hidden",this._reset_node_custom_style(i,e.data),t.appendChild(i),n.element=i},remove_node:function(e){null!=this.selected_node&&this.selected_node.id==e.id&&(this.selected_node=null),null!=this.editing_node&&this.editing_node.id==e.id&&(e._data.view.element.removeChild(this.e_editor),this.editing_node=null);var t=e.children,n=t.length;while(n--)this.remove_node(t[n]);if(e._data.view){var i=e._data.view.element,o=e._data.view.expander;this.e_nodes.removeChild(i),this.e_nodes.removeChild(o),e._data.view.element=null,e._data.view.expander=null}},update_node:function(e){var t=e._data.view,n=t.element;e.topic&&(this.opts.support_html?u(n,e.topic):h(n,e.topic)),t.width=n.clientWidth,t.height=n.clientHeight},select_node:function(e){this.selected_node&&(this.selected_node._data.view.element.className=this.selected_node._data.view.element.className.replace(/\s*selected\b/i,""),this.reset_node_custom_style(this.selected_node)),e&&(this.selected_node=e,e._data.view.element.className+=" selected",this.clear_node_custom_style(e))},select_clear:function(){this.select_node(null)},get_editing_node:function(){return this.editing_node},is_editing:function(){return!!this.editing_node},edit_node_begin:function(e){if(e.topic){null!=this.editing_node&&this.edit_node_end(),this.editing_node=e;var t=e._data.view,n=t.element,i=e.topic,o=getComputedStyle(n);this.e_editor.value=i,this.e_editor.style.width=n.clientWidth-parseInt(o.getPropertyValue("padding-left"))-parseInt(o.getPropertyValue("padding-right"))+"px",n.innerHTML="",n.appendChild(this.e_editor),n.style.zIndex=5,this.e_editor.focus(),this.e_editor.select()}else a.warn("don't edit image nodes")},edit_node_end:function(){if(null!=this.editing_node){var e=this.editing_node;this.editing_node=null;var t=e._data.view,n=t.element,i=this.e_editor.value;n.style.zIndex="auto",n.removeChild(this.e_editor),f.util.text.is_empty(i)||e.topic===i?this.opts.support_html?u(n,e.topic):h(n,e.topic):this.jm.update_node(e.id,i)}},get_view_offset:function(){var e=this.layout.bounds,t=(this.size.w-e.e-e.w)/2,n=this.size.h/2;return{x:t,y:n}},resize:function(){this.e_canvas.width=1,this.e_canvas.height=1,this.e_nodes.style.width="1px",this.e_nodes.style.height="1px",this.expand_size(),this._show()},_show:function(){this.e_canvas.width=this.size.w,this.e_canvas.height=this.size.h,this.e_nodes.style.width=this.size.w+"px",this.e_nodes.style.height=this.size.h+"px",this.show_nodes(),this.show_lines(),this.jm.invoke_event_handle(f.event_type.resize,{data:[]})},zoomIn:function(){return this.setZoom(this.actualZoom+this.zoomStep)},zoomOut:function(){return this.setZoom(this.actualZoom-this.zoomStep)},setZoom:function(e){if(e<this.minZoom||e>this.maxZoom)return!1;this.actualZoom=e;for(var t=0;t<this.e_panel.children.length;t++)this.e_panel.children[t].style.transform="scale("+e+")";return this.show(!0),!0},_center_root:function(){var e=this.e_panel.clientWidth,t=this.e_panel.clientHeight;if(this.size.w>e){var n=this.get_view_offset();this.e_panel.scrollLeft=n.x-e/2}this.size.h>t&&(this.e_panel.scrollTop=(this.size.h-t)/2)},show:function(e){a.debug("view.show"),this.expand_size(),this._show(),e&&this._center_root()},relayout:function(){this.expand_size(),this._show()},save_location:function(e){var t=e._data.view;t._saved_location={x:parseInt(t.element.style.left)-this.e_panel.scrollLeft,y:parseInt(t.element.style.top)-this.e_panel.scrollTop}},restore_location:function(e){var t=e._data.view;this.e_panel.scrollLeft=parseInt(t.element.style.left)-t._saved_location.x,this.e_panel.scrollTop=parseInt(t.element.style.top)-t._saved_location.y},clear_nodes:function(){var e=this.jm.mind;if(null!=e){var t=e.nodes,n=null;for(var i in t)n=t[i],n._data.view.element=null,n._data.view.expander=null;this.e_nodes.innerHTML=""}},show_nodes:function(){var e=this.jm.mind.nodes,t=null,n=null,i=null,o=null,r=null,a="-",s=null,d=this.get_view_offset();for(var l in e)t=e[l],s=t._data.view,n=s.element,i=s.expander,this.layout.is_visible(t)?(this.reset_node_custom_style(t),o=this.layout.get_node_point(t),s.abs_x=d.x+o.x,s.abs_y=d.y+o.y,n.style.left=d.x+o.x+"px",n.style.top=d.y+o.y+"px",n.style.display="",n.style.visibility="visible",!t.isroot&&t.children.length>0&&(a=t.expanded?"-":"+",r=this.layout.get_expander_point(t),i.style.left=d.x+r.x+"px",i.style.top=d.y+r.y+"px",i.style.display="",i.style.visibility="visible",h(i,a)),t.isroot||0!=t.children.length||(i.style.display="none",i.style.visibility="hidden")):(n.style.display="none",i.style.display="none")},reset_node_custom_style:function(e){this._reset_node_custom_style(e._data.view.element,e.data)},_reset_node_custom_style:function(e,t){if("background-color"in t&&(e.style.backgroundColor=t["background-color"]),"foreground-color"in t&&(e.style.color=t["foreground-color"]),"width"in t&&(e.style.width=t["width"]+"px"),"height"in t&&(e.style.height=t["height"]+"px"),"font-size"in t&&(e.style.fontSize=t["font-size"]+"px"),"font-weight"in t&&(e.style.fontWeight=t["font-weight"]),"font-style"in t&&(e.style.fontStyle=t["font-style"]),"background-image"in t){var n=t["background-image"];if(n.startsWith("data")&&t["width"]&&t["height"]){var i=new Image;i.onload=function(){var t=l("canvas");t.width=e.clientWidth,t.height=e.clientHeight;var n=this;if(t.getContext){var i=t.getContext("2d");i.drawImage(n,2,2,e.clientWidth,e.clientHeight);var o=t.toDataURL();e.style.backgroundImage="url("+o+")"}},i.src=n}else e.style.backgroundImage="url("+n+")";e.style.backgroundSize="99%","background-rotation"in t&&(e.style.transform="rotate("+t["background-rotation"]+"deg)")}},clear_node_custom_style:function(e){var t=e._data.view.element;t.style.backgroundColor="",t.style.color=""},clear_lines:function(e){var t=e||this.canvas_ctx;f.util.canvas.clear(t,0,0,this.size.w,this.size.h)},show_lines:function(e){this.clear_lines(e);var t=this.jm.mind.nodes,n=null,i=null,o=null,r=this.get_view_offset();for(var a in t)n=t[a],n.isroot||"visible"in n._data.layout&&!n._data.layout.visible||(i=this.layout.get_node_point_in(n),o=this.layout.get_node_point_out(n.parent),this.draw_line(o,i,r,e))},draw_line:function(e,t,n,i){var o=i||this.canvas_ctx;o.strokeStyle=this.opts.line_color,o.lineWidth=this.opts.line_width,o.lineCap="round",f.util.canvas.bezierto(o,e.x+n.x,e.y+n.y,t.x+n.x,t.y+n.y)}},f.shortcut_provider=function(e,t){this.jm=e,this.opts=t,this.mapping=t.mapping,this.handles=t.handles,this._mapping={}},f.shortcut_provider.prototype={init:function(){for(var e in f.util.dom.add_event(s,"keydown",this.handler.bind(this)),this.handles["addchild"]=this.handle_addchild,this.handles["addbrother"]=this.handle_addbrother,this.handles["editnode"]=this.handle_editnode,this.handles["delnode"]=this.handle_delnode,this.handles["toggle"]=this.handle_toggle,this.handles["up"]=this.handle_up,this.handles["down"]=this.handle_down,this.handles["left"]=this.handle_left,this.handles["right"]=this.handle_right,this.mapping)this.mapping[e]&&e in this.handles&&(this._mapping[this.mapping[e]]=this.handles[e])},enable_shortcut:function(){this.opts.enable=!0},disable_shortcut:function(){this.opts.enable=!1},handler:function(e){if(!this.jm.view.is_editing()){var t=e||event;if(!this.opts.enable)return!0;var n=t.keyCode;n in this._mapping&&this._mapping[n].call(this,this.jm,e)}},handle_addchild:function(e,t){var n=e.get_selected_node();if(n){var i=f.util.uuid.newid(),o=e.add_node(n,i,"æ°å»ºèç¹");o&&(e.select_node(i),e.begin_edit(i))}},handle_addbrother:function(e,t){var n=e.get_selected_node();if(n&&!n.isroot){var i=f.util.uuid.newid(),o=e.insert_node_after(n,i,"æ°å»ºèç¹");o&&(e.select_node(i),e.begin_edit(i))}},handle_editnode:function(e,t){var n=e.get_selected_node();n&&e.begin_edit(n)},handle_delnode:function(e,t){var n=e.get_selected_node();n&&!n.isroot&&(e.select_node(n.parent),e.remove_node(n))},handle_toggle:function(e,t){var n=t||event,i=e.get_selected_node();i&&(e.toggle_node(i.id),n.stopPropagation(),n.preventDefault())},handle_up:function(e,t){var n=t||event,i=e.get_selected_node();if(i){var o=e.find_node_before(i);if(!o){var r=e.find_node_before(i.parent);r&&r.children.length>0&&(o=r.children[r.children.length-1])}o&&e.select_node(o),n.stopPropagation(),n.preventDefault()}},handle_down:function(e,t){var n=t||event,i=e.get_selected_node();if(i){var o=e.find_node_after(i);if(!o){var r=e.find_node_after(i.parent);r&&r.children.length>0&&(o=r.children[0])}o&&e.select_node(o),n.stopPropagation(),n.preventDefault()}},handle_left:function(e,t){this._handle_direction(e,t,f.direction.left)},handle_right:function(e,t){this._handle_direction(e,t,f.direction.right)},_handle_direction:function(e,t,n){var i=t||event,o=e.get_selected_node(),r=null;if(o){if(o.isroot){for(var a=o.children,s=[],d=0;d<a.length;d++)a[d].direction===n&&s.push(d);r=a[s[Math.floor((s.length-1)/2)]]}else if(o.direction===n){s=o.children;var l=s.length;l>0&&(r=s[Math.floor((l-1)/2)])}else r=o.parent;r&&e.select_node(r),i.stopPropagation(),i.preventDefault()}}},f.plugin=function(e,t){this.name=e,this.init=t},f.plugins=[],f.register_plugin=function(e){e instanceof f.plugin&&f.plugins.push(e)},f.init_plugins=function(e){t.setTimeout(function(){f._init_plugins(e)},0)},f._init_plugins=function(e){for(var t=f.plugins.length,n=null,i=0;i<t;i++)n=f.plugins[i].init,"function"===typeof n&&n(e)},f.show=function(e,t){var n=new f(e);return n.show(t),n},e.exports=f,t[n]=f}else a.log(n+" has been already exist.")})("undefined"!==typeof window?window:t)}).call(this,n("c8ba"))},6821:function(e,t,n){var i=n("626a"),o=n("be13");e.exports=function(e){return i(o(e))}},"69a8":function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},"6a99":function(e,t,n){var i=n("d3f4");e.exports=function(e,t){if(!i(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!i(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},"6b54":function(e,t,n){"use strict";n("3846");var i=n("cb7c"),o=n("0bfb"),r=n("9e1e"),a="toString",s=/./[a],d=function(e){n("2aba")(RegExp.prototype,a,e,!0)};n("79e5")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?d(function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!r&&e instanceof RegExp?o.call(e):void 0)}):s.name!=a&&d(function(){return s.call(this)})},"6e2c":function(e,t,n){},7726:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"77f1":function(e,t,n){var i=n("4588"),o=Math.max,r=Math.min;e.exports=function(e,t){return e=i(e),e<0?o(e+t,0):r(e,t)}},"78ae":function(e,t,n){"use strict";var i="@@any-promise/REGISTRATION",o=null;e.exports=function(e,t){return function(n,r){n=n||null,r=r||{};var a=!1!==r.global;if(null===o&&a&&(o=e[i]||null),null!==o&&null!==n&&o.implementation!==n)throw new Error('any-promise already defined as "'+o.implementation+'".  You can only register an implementation before the first  call to require("any-promise") and an implementation cannot be changed');return null===o&&(o=null!==n&&"undefined"!==typeof r.Promise?{Promise:r.Promise,implementation:n}:t(n),a&&(e[i]=o)),o}}},"79e5":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"7f20":function(e,t,n){var i=n("86cc").f,o=n("69a8"),r=n("2b4c")("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,r)&&i(e,r,{configurable:!0,value:t})}},8378:function(e,t){var n=e.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},"84f2":function(e,t){e.exports={}},"86cc":function(e,t,n){var i=n("cb7c"),o=n("c69a"),r=n("6a99"),a=Object.defineProperty;t.f=n("9e1e")?Object.defineProperty:function(e,t,n){if(i(e),t=r(t,!0),i(n),o)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},9494:function(e,t){(function(e){"use strict";var t="jsMind",n=e[t];if(n&&"undefined"==typeof n.screenshot){var i=e.document,o=function(e){return i.createElement(e)},r=function(e,t){return e.getPropertyValue(t)},a=function(e){var t=r(e,"visibility"),n=r(e,"display");return"hidden"!==t&&"none"!==n},s=n.util.canvas;s.rect=function(e,t,n,i,o,r){i<2*r&&(r=i/2),o<2*r&&(r=o/2),e.moveTo(t+r,n),e.arcTo(t+i,n,t+i,n+o,r),e.arcTo(t+i,n+o,t,n+o,r),e.arcTo(t,n+o,t,n,r),e.arcTo(t,n,t+i,n,r)},s.text_multiline=function(e,t,n,i,o,r,a){var s="",d=t.length,l=t.split(""),h=null;e.textAlign="left",e.textBaseline="top";for(var u=0;u<d;u++)h=s+l[u],e.measureText(h).width>o&&u>0?(e.fillText(s,n,i),s=l[u],i+=a):s=h;e.fillText(s,n,i)},s.text_ellipsis=function(e,t,n,i,o,r){var a=i+r/2;t=s.fittingString(e,t,o);e.textAlign="left",e.textBaseline="middle",e.fillText(t,n,a,o)},s.fittingString=function(e,t,n){var i=e.measureText(t).width,o="â¦",r=e.measureText(o).width;if(i<=n||i<=r)return t;var a=t.length;while(i>=n-r&&a-- >0)t=t.substring(0,a),i=e.measureText(t).width;return t+o},s.image=function(e,t,n,i,o,r,a,d,l){var h=new Image;h.onload=function(){e.save(),e.translate(n,i),e.save(),e.beginPath(),s.rect(e,0,0,o,r,a),e.closePath(),e.clip(),e.translate(o/2,r/2),e.rotate(d*Math.PI/180),e.drawImage(h,-o/2,-r/2),e.restore(),e.restore(),l()},h.src=t},n.screenshot=function(e){this.jm=e,this.canvas_elem=null,this.canvas_ctx=null,this._inited=!1},n.screenshot.prototype={init:function(){if(!this._inited){console.log("init");var e=o("canvas"),t=e.getContext("2d");this.canvas_elem=e,this.canvas_ctx=t,this.jm.view.e_panel.appendChild(e),this._inited=!0,this.resize()}},shoot:function(e){this.init(),this._watermark();var t=this;this._draw(function(){e&&e(t),t.clean()})},shootDownload:function(){this.shoot(function(e){e._download()})},shootAsDataURL:function(e){this.shoot(function(t){e(t.canvas_elem.toDataURL())})},resize:function(){this._inited&&(this.canvas_elem.width=this.jm.view.size.w,this.canvas_elem.height=this.jm.view.size.h)},clean:function(){var e=this.canvas_elem;this.canvas_ctx.clearRect(0,0,e.width,e.height)},_draw:function(e){var t=this.canvas_ctx;t.textAlign="left",t.textBaseline="top",this._draw_lines(),this._draw_nodes(e)},_watermark:function(){var t=this.canvas_elem,n=this.canvas_ctx;n.textAlign="right",n.textBaseline="bottom",n.fillStyle="#000",n.font="11px Verdana,Arial,Helvetica,sans-serif",n.fillText("hizzgdev.github.io/jsmind",t.width-5.5,t.height-2.5),n.textAlign="left",n.fillText(e.location,5.5,t.height-2.5)},_draw_lines:function(){this.jm.view.show_lines(this.canvas_ctx)},_draw_nodes:function(t){var n,i=this.jm.mind.nodes;for(var o in i)n=i[o],this._draw_node(n);function r(){console.log("check_node_ready"+new Date);var o=!0;for(var a in i)n=i[a],o&=n.ready;o?e.setTimeout(t,200):e.setTimeout(r,200)}r()},_draw_node:function(e){var t=this.canvas_ctx,n=e._data.view,i=n.element,o=getComputedStyle(i);if(a(o)){var d=r(o,"background-color"),l=parseInt(r(o,"border-top-left-radius")),h=r(o,"color"),u=parseInt(r(o,"padding-left")),c=parseInt(r(o,"padding-right")),_=parseInt(r(o,"padding-top")),f=parseInt(r(o,"padding-bottom")),v=r(o,"text-overflow"),p=r(o,"font-style")+" "+r(o,"font-variant")+" "+r(o,"font-weight")+" "+r(o,"font-size")+"/"+r(o,"line-height")+" "+r(o,"font-family"),g={x:n.abs_x,y:n.abs_y,w:n.width+1,h:n.height+1},m={x:g.x+u,y:g.y+_,w:g.w-u-c,h:g.h-_-f};if(t.font=p,t.fillStyle=d,t.beginPath(),s.rect(t,g.x,g.y,g.w,g.h,l),t.closePath(),t.fill(),t.fillStyle=h,"background-image"in e.data){var y=r(o,"background-image").slice(5,-2);e.ready=!1;var b=0;"background-rotation"in e.data&&(b=e.data["background-rotation"]),s.image(t,y,g.x,g.y,g.w,g.h,l,b,function(){e.ready=!0})}if(e.topic)if("ellipsis"===v)s.text_ellipsis(t,e.topic,m.x,m.y,m.w,m.h);else{var w=parseInt(r(o,"line-height"));s.text_multiline(t,e.topic,m.x,m.y,m.w,m.h,w)}n.expander&&this._draw_expander(n.expander),"background-image"in e.data||(e.ready=!0)}else e.ready=!0},_draw_expander:function(e){var t=this.canvas_ctx,n=getComputedStyle(e);if(a(n)){var i=r(n,"left"),o=r(n,"top"),s=(r(n,"font"),parseInt(i)),d=parseInt(o),l="+"===e.innerHTML;t.lineWidth=1,t.beginPath(),t.arc(s+7,d+7,5,0,2*Math.PI,!0),t.moveTo(s+10,d+7),t.lineTo(s+4,d+7),l&&(t.moveTo(s+7,d+4),t.lineTo(s+7,d+10)),t.closePath(),t.stroke()}},_download:function(){var e=this.canvas_elem,t=this.jm.mind.name+".png";if(navigator.msSaveBlob&&e.msToBlob){var n=e.msToBlob();navigator.msSaveBlob(n,t)}else{var r=this.canvas_elem.toDataURL(),a=o("a");if("download"in a){a.style.visibility="hidden",a.href=r,a.download=t,i.body.appendChild(a);var s=i.createEvent("MouseEvents");s.initEvent("click",!0,!0),a.dispatchEvent(s),i.body.removeChild(a)}else location.href=r}},jm_event_handle:function(e,t){e===n.event_type.resize&&this.resize()}};var d=new n.plugin("screenshot",function(e){var t=new n.screenshot(e);e.screenshot=t,e.shoot=function(){t.shoot()},e.add_event_listener(function(e,n){t.jm_event_handle.call(t,e,n)})});n.register_plugin(d)}})(window)},"9b43":function(e,t,n){var i=n("d8e8");e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}}},"9ba9":function(e,t,n){e.exports=n("2fc8")().Promise},"9c6c":function(e,t,n){var i=n("2b4c")("unscopables"),o=Array.prototype;void 0==o[i]&&n("32e9")(o,i,{}),e.exports=function(e){o[i][e]=!0}},"9def":function(e,t,n){var i=n("4588"),o=Math.min;e.exports=function(e){return e>0?o(i(e),9007199254740991):0}},"9e1e":function(e,t,n){e.exports=!n("79e5")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},a481:function(e,t,n){"use strict";var i=n("cb7c"),o=n("4bf8"),r=n("9def"),a=n("4588"),s=n("0390"),d=n("5f1b"),l=Math.max,h=Math.min,u=Math.floor,c=/\$([$&`']|\d\d?|<[^>]*>)/g,_=/\$([$&`']|\d\d?)/g,f=function(e){return void 0===e?e:String(e)};n("214f")("replace",2,function(e,t,n,v){return[function(i,o){var r=e(this),a=void 0==i?void 0:i[t];return void 0!==a?a.call(i,r,o):n.call(String(r),i,o)},function(e,t){var o=v(n,e,this,t);if(o.done)return o.value;var u=i(e),c=String(this),_="function"===typeof t;_||(t=String(t));var g=u.global;if(g){var m=u.unicode;u.lastIndex=0}var y=[];while(1){var b=d(u,c);if(null===b)break;if(y.push(b),!g)break;var w=String(b[0]);""===w&&(u.lastIndex=s(c,r(u.lastIndex),m))}for(var x="",j=0,k=0;k<y.length;k++){b=y[k];for(var S=String(b[0]),T=l(h(a(b.index),c.length),0),E=[],M=1;M<b.length;M++)E.push(f(b[M]));var z=b.groups;if(_){var C=[S].concat(E,T,c);void 0!==z&&C.push(z);var I=String(t.apply(void 0,C))}else I=p(S,c,T,E,z,t);T>=j&&(x+=c.slice(j,T)+I,j=T+S.length)}return x+c.slice(j)}];function p(e,t,i,r,a,s){var d=i+e.length,l=r.length,h=_;return void 0!==a&&(a=o(a),h=c),n.call(s,h,function(n,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,i);case"'":return t.slice(d);case"<":s=a[o.slice(1,-1)];break;default:var h=+o;if(0===h)return n;if(h>l){var c=u(h/10);return 0===c?n:c<=l?void 0===r[c-1]?o.charAt(1):r[c-1]+o.charAt(1):n}s=r[h-1]}return void 0===s?"":s})}})},aae3:function(e,t,n){var i=n("d3f4"),o=n("2d95"),r=n("2b4c")("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==o(e))}},ac6a:function(e,t,n){for(var i=n("cadf"),o=n("0d58"),r=n("2aba"),a=n("7726"),s=n("32e9"),d=n("84f2"),l=n("2b4c"),h=l("iterator"),u=l("toStringTag"),c=d.Array,_={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=o(_),v=0;v<f.length;v++){var p,g=f[v],m=_[g],y=a[g],b=y&&y.prototype;if(b&&(b[h]||s(b,h,c),b[u]||s(b,u,g),d[g]=c,m))for(p in i)b[p]||r(b,p,i[p],!0)}},b0c5:function(e,t,n){"use strict";var i=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},be13:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},c366:function(e,t,n){var i=n("6821"),o=n("9def"),r=n("77f1");e.exports=function(e){return function(t,n,a){var s,d=i(t),l=o(d.length),h=r(a,l);if(e&&n!=n){while(l>h)if(s=d[h++],s!=s)return!0}else for(;l>h;h++)if((e||h in d)&&d[h]===n)return e||h||0;return!e&&-1}}},c69a:function(e,t,n){e.exports=!n("9e1e")&&!n("79e5")(function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a})},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}e.exports=n},ca5a:function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},cadf:function(e,t,n){"use strict";var i=n("9c6c"),o=n("d53b"),r=n("84f2"),a=n("6821");e.exports=n("01f9")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")},cb7c:function(e,t,n){var i=n("d3f4");e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},ce10:function(e,t,n){var i=n("69a8"),o=n("6821"),r=n("c366")(!1),a=n("613b")("IE_PROTO");e.exports=function(e,t){var n,s=o(e),d=0,l=[];for(n in s)n!=a&&i(s,n)&&l.push(n);while(t.length>d)i(s,n=t[d++])&&(~r(l,n)||l.push(n));return l}},d3f4:function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},d53b:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},d8e8:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},e11e:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},ebd6:function(e,t,n){var i=n("cb7c"),o=n("d8e8"),r=n("2b4c")("species");e.exports=function(e,t){var n,a=i(e).constructor;return void 0===a||void 0==(n=i(a)[r])?t:o(n)}},fa5b:function(e,t,n){e.exports=n("5537")("native-function-to-string",Function.toString)},fab2:function(e,t,n){var i=n("7726").document;e.exports=i&&i.documentElement}}]);
//# sourceMappingURL=chunk-vendors.14229ab9.js.map